{
	"name": "aEnemy ðŸ˜ˆ",
	"events": [
		{
			"eventType": "variable",
			"name": "spawn_randomSize",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 208214625529194
		},
		{
			"eventType": "variable",
			"name": "spawn_randomAngle",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 853079015252439
		},
		{
			"aceType": "action",
			"aceName": "spawnFromQueue",
			"objectClass": "Enemy",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "Player",
					"sid": 575399264185283,
					"parameters": {
						"instance-variable": "queue_spawn_enemy",
						"comparison": 4,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"id": "subtract-from-instvar",
					"objectClass": "Player",
					"sid": 375479589213943,
					"parameters": {
						"instance-variable": "queue_spawn_enemy",
						"value": "1"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 361829937226822,
					"parameters": {
						"variable": "spawn_randomAngle",
						"value": "random(0, 360)"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 770180229278679,
					"disabled": true,
					"parameters": {
						"variable": "spawn_randomSize",
						"value": "random(R_Spawn_RandomSize_Min, R_Spawn_RandomSize_Max)"
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 921526464494714,
					"parameters": {
						"object-to-create": "Enemy",
						"layer": "LAYER_Main",
						"x": "Player.X + cos(spawn_randomAngle) * R_Spawn_Distance",
						"y": "Player.Y + sin(spawn_randomAngle) * R_Spawn_Distance",
						"create-hierarchy": true,
						"template-name": "\"\""
					}
				},
				{
					"id": "set-animation",
					"objectClass": "Enemy",
					"sid": 188179399128604,
					"parameters": {
						"animation": "AdvancedRandom.WeightedByName(PT_Enemies)",
						"from": "beginning"
					}
				},
				{
					"id": "set-size",
					"objectClass": "Enemy",
					"sid": 340816504532596,
					"disabled": true,
					"parameters": {
						"width": "spawn_randomSize",
						"height": "spawn_randomSize"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Enemy",
					"sid": 736865178929334,
					"parameters": {
						"instance-variable": "health",
						"value": "Rules.Get(KEY_Enemies & DOT & Enemy.AnimationName & DOT & KEY_Health)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Enemy",
					"sid": 639507967605963,
					"parameters": {
						"instance-variable": "damage",
						"value": "Rules.Get(KEY_Enemies & DOT & Enemy.AnimationName & DOT & KEY_Damage)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Enemy",
					"sid": 903127641605562,
					"parameters": {
						"instance-variable": "experience",
						"value": "Rules.Get(KEY_Enemies & DOT & Enemy.AnimationName & DOT & KEY_Experience)"
					}
				}
			],
			"sid": 418646961252127
		},
		{
			"aceType": "action",
			"aceName": "tick",
			"objectClass": "Enemy",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 759310124208695,
					"parameters": {
						"variable": "isLeveling",
						"comparison": 0,
						"value": "NO"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "Enemy",
					"sid": 169438741384102,
					"parameters": {
						"instance-variable": "isDead",
						"comparison": 0,
						"value": "NO"
					}
				}
			],
			"actions": [],
			"sid": 323244324797060,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Enemy",
							"sid": 807314407853475,
							"parameters": {
								"object": "Weapon"
							}
						},
						{
							"id": "is-on-screen",
							"objectClass": "Weapon",
							"sid": 250565518753538
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Weapon",
							"sid": 682851023232220,
							"parameters": {
								"instance-variable": "isDestroyed",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Damage enemy"
						},
						{
							"id": "subtract-from-instvar",
							"objectClass": "Enemy",
							"sid": 285493070811282,
							"parameters": {
								"instance-variable": "health",
								"value": "Weapon.damage * dt"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "Enemy",
							"sid": 785851037904608,
							"parameters": {
								"instance-variable": "damageTaken",
								"value": "Weapon.damage * dt"
							}
						},
						{
							"type": "comment",
							"text": "Show damage flash"
						},
						{
							"id": "set-default-color",
							"objectClass": "Enemy",
							"sid": 485879420803582,
							"parameters": {
								"color": "rgbEx(500, 500, 500)"
							}
						},
						{
							"type": "comment",
							"text": "If projectile pierced a new enemy, add it to the list"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Weapon",
							"sid": 589144911077692,
							"parameters": {
								"instance-variable": "piercedUIDs_SSV",
								"value": "find(SPACE & Self.piercedUIDs_SSV & SPACE, str(Enemy.UID)) = NOTHING ? Self.piercedUIDs_SSV & SPACE & Enemy.UID : Self.piercedUIDs_SSV"
							}
						}
					],
					"sid": 465104577973746,
					"children": [
						{
							"eventType": "comment",
							"text": "Check projectile piercing limit & destroy projectile if reached"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 429591461669344,
									"parameters": {
										"object": "Weapon"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 995038679006034,
									"parameters": {
										"object": "Weapon",
										"expression": "tokencount(trim(Weapon.piercedUIDs_SSV), SPACE)",
										"comparison": 5,
										"value": "Rules.Get(KEY_Weapons & DOT & Weapon.AnimationName & DOT & KEY_PierceLimit)"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 988057123335795,
									"parameters": {
										"type": "log",
										"message": "\"Projectile #\" & Weapon.UID & \" has pierced \" & tokencount(trim(Weapon.piercedUIDs_SSV), SPACE) & \" enemies, destroying.\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Weapon",
									"sid": 151100235435201,
									"parameters": {
										"instance-variable": "isDestroyed",
										"value": "YES"
									}
								},
								{
									"type": "comment",
									"text": "todo tween etc"
								},
								{
									"id": "destroy",
									"objectClass": "Weapon",
									"sid": 452669270812600
								}
							],
							"sid": 728908823243223
						},
						{
							"eventType": "variable",
							"name": "randomAngle",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 895032254930732
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Enemy",
									"sid": 152429532726828,
									"parameters": {
										"instance-variable": "damageTaken",
										"comparison": 5,
										"value": "1"
									}
								},
								{
									"id": "has-children",
									"objectClass": "Enemy",
									"sid": 141796681604622,
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 215321142275892,
									"parameters": {
										"variable": "randomAngle",
										"value": "random(0, 360)"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Enemy",
									"sid": 784961018944364,
									"parameters": {
										"object": "UI_TextSF_DamageNumber",
										"layer": "Enemy.LayerName",
										"image-point": "IP_Enemy_DamageNumber",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-x",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 380455576936530,
									"parameters": {
										"x": "Self.X + 1"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Enemy",
									"sid": 697475773580818,
									"parameters": {
										"child": "UI_TextSF_DamageNumber",
										"transform-x": false,
										"transform-y": false,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "tween-value",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 459783682704980,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "TWEEN_UI_TextSF_DamageNumber_Scale",
										"start-value": "Self.CharacterScale",
										"end-value": "Self.CharacterScale + 0.25",
										"time": "0.2",
										"ease": "easeoutcirc",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "todo try slight movement in a random direction instead of scale tween"
								},
								{
									"id": "tween-one-property",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 109127360225409,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetY",
										"end-value": "Self.Y - 2",
										"time": "0.3",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 787613074357709,
									"disabled": true,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "position",
										"end-x": "Self.X + cos(randomAngle) * 10",
										"end-y": "Self.Y + sin(randomAngle) * 10",
										"time": "0.3",
										"ease": "easeoutexpo",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 242393952289136,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "position",
										"end-x": "Self.X + cos(angle(0, 0, Enemy.Physics.VelocityX, Enemy.Physics.VelocityY) + 180) * 10",
										"end-y": "Self.Y + sin(angle(0, 0, Enemy.Physics.VelocityX, Enemy.Physics.VelocityY) + 180) * 10",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 995825742636294,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinexpo",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 435503946897832,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-text",
									"objectClass": "UI_TextSF_DamageNumber",
									"sid": 676689008390364,
									"parameters": {
										"text": "round(Enemy.damageTaken)"
									}
								}
							],
							"sid": 768998235732742
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Enemy",
									"sid": 404823882277430,
									"parameters": {
										"instance-variable": "health",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Enemy",
									"sid": 402986492608939,
									"parameters": {
										"instance-variable": "isDead",
										"value": "YES"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Enemy",
									"sid": 228016190127938,
									"behaviorType": "Physics",
									"parameters": {
										"mode": "disabled"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Enemy",
									"sid": 331735849961764,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutcubic",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Enemy",
									"sid": 304212795716647,
									"parameters": {
										"object": "Drop",
										"layer": "LAYER_Main",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Drop",
									"sid": 131233287870206,
									"parameters": {
										"instance-variable": "amount",
										"value": "Enemy.experience"
									}
								}
							],
							"sid": 158259314566033
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Enemy",
							"sid": 446909647721359,
							"parameters": {
								"object": "Weapon"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "todo mn"
						},
						{
							"id": "apply-force-towards-position",
							"objectClass": "Enemy",
							"sid": 309384909754023,
							"behaviorType": "Physics",
							"parameters": {
								"force": "Rules.Get(KEY_Enemies & DOT & Enemy.AnimationName & DOT & KEY_MovementSpeed)",
								"x": "Player.X",
								"y": "Player.Y",
								"image-point": "0"
							}
						},
						{
							"type": "comment",
							"text": "todo set linear damping after setting speed?"
						},
						{
							"id": "set-default-color",
							"objectClass": "Enemy",
							"sid": 928884212976278,
							"parameters": {
								"color": "rgbEx(100, 100, 100)"
							}
						}
					],
					"sid": 403949667641976
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "Enemy",
							"sid": 127593178964393,
							"parameters": {
								"comparison": 4,
								"x-co-ordinate": "Player.X + C_Enemy_Mirror_Threshold"
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Enemy",
							"sid": 629899684839711,
							"parameters": {
								"state": "mirrored"
							}
						}
					],
					"sid": 304448305740616
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "Enemy",
							"sid": 333258971427132,
							"parameters": {
								"comparison": 2,
								"x-co-ordinate": "Player.X - C_Enemy_Mirror_Threshold"
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Enemy",
							"sid": 720267318350729,
							"parameters": {
								"state": "not-mirrored"
							}
						}
					],
					"sid": 894429956563491
				}
			]
		}
	],
	"sid": 389141576528271
}