{
	"name": "aPlayer ðŸ§‘",
	"events": [
		{
			"aceType": "action",
			"aceName": "spawn",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 901945052113015,
					"parameters": {
						"object-to-create": "Player",
						"layer": "LAYER_Main",
						"x": "LayoutWidth * 0.5",
						"y": "LayoutHeight * 0.5",
						"create-hierarchy": true,
						"template-name": "\"\""
					}
				},
				{
					"type": "comment",
					"text": "Initialize player behaviours"
				},
				{
					"id": "set-max-speed",
					"objectClass": "Player",
					"sid": 316291171629907,
					"behaviorType": "8Direction",
					"parameters": {
						"max-speed": "Rules.Get(KEY_Player & DOT & KEY_MovementSpeed)"
					}
				},
				{
					"id": "set-acceleration",
					"objectClass": "Player",
					"sid": 221202146104270,
					"behaviorType": "8Direction",
					"parameters": {
						"acceleration": "Rules.Get(KEY_Player & DOT & KEY_MovementAcceleration)"
					}
				},
				{
					"id": "set-deceleration",
					"objectClass": "Player",
					"sid": 993068735412028,
					"behaviorType": "8Direction",
					"parameters": {
						"deceleration": "Rules.Get(KEY_Player & DOT & KEY_MovementDeceleration)"
					}
				},
				{
					"type": "comment",
					"text": "Initialize player IVs"
				},
				{
					"type": "comment",
					"text": "todo_maybe remove these IVs and keep data in Rules"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 780833186605289,
					"parameters": {
						"instance-variable": "cooldown_weapon_sword",
						"value": "Rules.Get(KEY_Weapons & DOT & Key_Weapon_Sword & DOT & KEY_Cooldown)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 177029972898140,
					"parameters": {
						"instance-variable": "cooldown_spawn_enemy",
						"value": "Rules.Get(KEY_Spawns & DOT & KEY_Enemies & DOT & KEY_Cooldown)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 271378456414787,
					"parameters": {
						"instance-variable": "cooldown_spawn_item",
						"value": "Rules.Get(KEY_Spawns & DOT & KEY_Items & DOT & KEY_Cooldown)"
					}
				}
			],
			"sid": 821905210614926
		},
		{
			"aceType": "action",
			"aceName": "tick",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 198184957131593,
					"parameters": {
						"variable": "isLeveling",
						"comparison": 0,
						"value": "NO"
					}
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "Player",
					"sid": 608216906352595,
					"parameters": {
						"instance-variable": "isDead",
						"comparison": 0,
						"value": "NO"
					}
				},
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 409663250665454,
					"parameters": {
						"variable": "isPaused",
						"comparison": 0,
						"value": "NO"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Update cooldowns"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 678410323692335,
					"parameters": {
						"instance-variable": "cooldown_weapon_sword",
						"value": "Self.cooldown_weapon_sword = NOTHING ? NOTHING : max(0, Self.cooldown_weapon_sword - dt)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 880923047439531,
					"parameters": {
						"instance-variable": "cooldown_spawn_enemy",
						"value": "Self.cooldown_spawn_enemy = NOTHING ? NOTHING : max(0, Self.cooldown_spawn_enemy - dt)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 228730679590735,
					"parameters": {
						"instance-variable": "cooldown_spawn_item",
						"value": "Self.cooldown_spawn_item = NOTHING ? NOTHING : max(0, Self.cooldown_spawn_item - dt)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 259950020665446,
					"parameters": {
						"instance-variable": "isHurt",
						"value": "NO"
					}
				}
			],
			"sid": 892639912846222,
			"children": [
				{
					"eventType": "comment",
					"text": "Attack: Sword"
				},
				{
					"eventType": "comment",
					"text": "todo move cooldown to rules?"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "Rules",
							"sid": 109862083989288,
							"parameters": {
								"path": "KEY_Weapons & DOT & Key_Weapon_Sword & DOT & KEY_Amount",
								"cmp": 4,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 180896289172722,
							"parameters": {
								"instance-variable": "cooldown_weapon_sword",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 608152032944310,
							"parameters": {
								"instance-variable": "cooldown_weapon_sword",
								"value": "Rules.Get(KEY_Weapons & DOT & Key_Weapon_Sword & DOT & KEY_Cooldown) * Rules.Get(KEY_Player & DOT & KEY_Bonus_Weapon_Cooldown_Multiplier)"
							}
						},
						{
							"customAction": "spawn",
							"objectClass": "Weapon",
							"sid": 748740735832209,
							"parameters": [
								"Key_Weapon_Sword",
								"Rules.Get(KEY_Weapons & DOT & Key_Weapon_Sword & DOT & KEY_Amount) + Rules.Get(KEY_Player & DOT & KEY_Bonus_Weapon_Amount_Add)",
								"Player.lastMovingAngle",
								"Rules.Get(KEY_Weapons & DOT & Key_Weapon_Sword & DOT & KEY_Scale) * Rules.Get(KEY_Player & DOT & KEY_Bonus_Weapon_Size_Multiplier)"
							]
						}
					],
					"sid": 135052668909848
				},
				{
					"eventType": "comment",
					"text": "Queue enemy spawn"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 329208908358969,
							"parameters": {
								"instance-variable": "cooldown_spawn_enemy",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 801998012935639,
							"parameters": {
								"instance-variable": "cooldown_spawn_enemy",
								"value": "Rules.Get(KEY_Spawns & DOT & KEY_Enemies & DOT & KEY_Cooldown) * Rules.Get(KEY_Player & DOT & KEY_Bonus_Enemy_Spawn_Cooldown_Multiplier)"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 317499462563761,
							"parameters": {
								"type": "log",
								"message": "\"Adding \" & Rules.Get(KEY_Spawns & DOT & KEY_Enemies & DOT & KEY_Amount) & \" enemies to the spawn queue.\""
							}
						},
						{
							"id": "add-to",
							"objectClass": "Rules",
							"sid": 232278523205720,
							"parameters": {
								"path": "KEY_Queues & DOT & KEY_Enemies",
								"value": "Rules.Get(KEY_Spawns & DOT & KEY_Enemies & DOT & KEY_Amount)"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 650407931225055,
							"parameters": {
								"type": "log",
								"message": "\"Enemy spawn queue size: \" & Rules.Get(KEY_Queues & DOT & KEY_Enemies)"
							}
						}
					],
					"sid": 884938568296906
				},
				{
					"eventType": "comment",
					"text": "Queue item spawn"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 581358925559862,
							"parameters": {
								"instance-variable": "cooldown_spawn_item",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 335745970724105,
							"parameters": {
								"instance-variable": "cooldown_spawn_item",
								"value": "Rules.Get(KEY_Spawns & DOT & KEY_Items & DOT & KEY_Cooldown) * Rules.Get(KEY_Player & DOT & KEY_Bonus_Item_Spawn_Cooldown_Multiplier)"
							}
						},
						{
							"id": "push-value",
							"objectClass": "Rules",
							"sid": 882009730037582,
							"parameters": {
								"where": "back",
								"path": "KEY_Queues & DOT & KEY_Items",
								"value": "AdvancedRandom.WeightedByName(PT_Items)"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 263380193314445,
							"parameters": {
								"type": "log",
								"message": "\"A \" & Rules.Get(KEY_Queues & DOT & KEY_Items & DOT & \"0\") & \" will spawn soon...\""
							}
						}
					],
					"sid": 416805021167430
				},
				{
					"eventType": "comment",
					"text": "Pick up item"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 229852428941040,
							"parameters": {
								"object": "Item"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Item",
							"sid": 792888105578515,
							"parameters": {
								"instance-variable": "isPickedUp",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 679558873454432,
							"parameters": {
								"type": "log",
								"message": "\"Picked up item: \" & Item.AnimationName"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Item",
							"sid": 924526291743139,
							"parameters": {
								"instance-variable": "isPickedUp",
								"value": "YES"
							}
						},
						{
							"type": "comment",
							"text": "Apply item (multiply)"
						},
						{
							"id": "set-value",
							"objectClass": "Rules",
							"sid": 277736828016472,
							"parameters": {
								"path": "Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)",
								"value": "Rules.Get(Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)) * Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Multiply)"
							}
						},
						{
							"type": "comment",
							"text": "Apply item (add)"
						},
						{
							"id": "add-to",
							"objectClass": "Rules",
							"sid": 637742095993104,
							"parameters": {
								"path": "Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)",
								"value": "Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Add)"
							}
						},
						{
							"type": "comment",
							"text": "Apply item (max)"
						},
						{
							"id": "set-value",
							"objectClass": "Rules",
							"sid": 315518869748953,
							"parameters": {
								"path": "Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)",
								"value": "Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Max) = 0 ? Rules.Get(Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)) : min(Rules.Get(Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Value)), Rules.Get(Rules.Get(KEY_Items & DOT & Item.AnimationName & DOT & KEY_Rule_Max)))"
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "Item",
							"sid": 484277913474189,
							"parameters": {
								"color": "rgbEx(500, 500, 500)"
							}
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Item",
							"sid": 207101199220881,
							"behaviorType": "Tween"
						},
						{
							"id": "set-opacity",
							"objectClass": "Item",
							"sid": 722870505118830,
							"parameters": {
								"opacity": "100"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Item",
							"sid": 865811529008529,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeoutexpo",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 303362420858496
				},
				{
					"eventType": "comment",
					"text": "Level up"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 196602343613844,
							"parameters": {
								"instance-variable": "experience",
								"comparison": 5,
								"value": "Rules.Get(KEY_Player & DOT & KEY_Experience_Target)"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 515945957497019,
							"parameters": {
								"variable": "isLeveling",
								"value": "YES"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 185234516291077,
							"parameters": {
								"object": "Drop",
								"time-scale": "0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 696855108900735,
							"parameters": {
								"object": "Enemy",
								"time-scale": "0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 240154764419903,
							"parameters": {
								"object": "Player",
								"time-scale": "0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 672119175847318,
							"parameters": {
								"object": "Weapon",
								"time-scale": "0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 197417321501456,
							"parameters": {
								"object": "UI_TextSF_DamageNumber",
								"time-scale": "0"
							}
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "UI_Border_LevelUp",
							"sid": 533770999747504,
							"behaviorType": "Tween"
						},
						{
							"id": "set-opacity",
							"objectClass": "UI_Border_LevelUp",
							"sid": 151538551897156,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "UI_Border_LevelUp",
							"sid": 855122626981925,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "UI_Border_LevelUp",
							"sid": 291321989748869,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "TWEEN_LevelUp_FadeIn",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "C_UI_LevelUp_Tween_Time",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "UI_Button9P_Upgrade",
							"sid": 830593669059011,
							"parameters": {
								"instance-variable": "upgrade",
								"value": "EMPTY"
							}
						},
						{
							"id": "set-text",
							"objectClass": "UI_TextSF_Upgrade",
							"sid": 532471539928078,
							"parameters": {
								"text": "EMPTY"
							}
						},
						{
							"id": "set-size",
							"objectClass": "UpgradeOptions",
							"sid": 786662869535676,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						}
					],
					"sid": 222428401904073,
					"children": [
						{
							"eventType": "variable",
							"name": "selectedUpgrade",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 836788779224185
						},
						{
							"eventType": "comment",
							"text": "This is not the most elegant solution to the problem that we have multiple (ideally 3) unique upgrade options, which should be chosen based on their weight"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 396368678140248,
									"parameters": {
										"count": "100"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "UI_Button9P_Upgrade",
									"sid": 520864684137256,
									"parameters": {
										"instance-variable": "upgrade",
										"comparison": 0,
										"value": "EMPTY"
									}
								},
								{
									"id": "pick-highestlowest",
									"objectClass": "UI_Button9P_Upgrade",
									"sid": 162181787282881,
									"parameters": {
										"which": "lowest",
										"instance-variable": "option"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "UI_Button9P_Upgrade",
									"sid": 728998628239513,
									"parameters": {
										"child": "UI_TextSF_Upgrade",
										"which": "own"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "UI_Button9P_Upgrade",
									"sid": 358465600345835,
									"parameters": {
										"child": "UI_Icon",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 882146791657174,
									"parameters": {
										"variable": "selectedUpgrade",
										"value": "AdvancedRandom.WeightedByName(PT_Upgrades)"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 318948125872464,
									"parameters": {
										"type": "log",
										"message": "\"upgrade choice step: \" & selectedUpgrade"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "UI_Button9P_Upgrade",
									"sid": 146361965504858,
									"parameters": {
										"instance-variable": "upgrade",
										"value": "UpgradeOptions.IndexOf(selectedUpgrade) = NOTHING ? selectedUpgrade : EMPTY"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "UI_Icon",
									"sid": 871116676435623,
									"parameters": {
										"animation": "Rules.Get(KEY_Upgrades & DOT & selectedUpgrade & DOT & KEY_Icon)",
										"from": "beginning"
									}
								},
								{
									"id": "set-text",
									"objectClass": "UI_TextSF_Upgrade",
									"sid": 632404175777567,
									"disabled": true,
									"parameters": {
										"text": "(UI_Button9P_Upgrade.upgrade = EMPTY ? EMPTY : Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Label)) & newline & \"\\[\" &\n(\nRules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Multiply) = 1 ? EMPTY : \"+ \" & (Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Multiply) - 1) * 100 & \"%\" & SPACE\n) &\n(\nRules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Add) = 0 ? EMPTY : (Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Add) < 0 ? \"- \" : \"+ \") & abs(Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Add))\n) & \"]\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "UI_TextSF_Upgrade",
									"sid": 356123709941595,
									"parameters": {
										"text": "(UI_Button9P_Upgrade.upgrade = EMPTY ? EMPTY : \"[scale=0.2]\" & Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Label) & \"[/scale]\" & newline & Rules.Get(KEY_Upgrades & DOT & UI_Button9P_Upgrade.upgrade & DOT & KEY_Description))"
									}
								},
								{
									"id": "push",
									"objectClass": "UpgradeOptions",
									"sid": 313942423004106,
									"parameters": {
										"where": "back",
										"value": "selectedUpgrade",
										"axis": "x"
									}
								}
							],
							"sid": 733472237835046
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Take damage from enemies"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerHurtbox",
							"sid": 649766626643368,
							"parameters": {
								"object": "Enemy"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Enemy",
							"sid": 279699643422993,
							"parameters": {
								"instance-variable": "isDead",
								"comparison": 0,
								"value": "NO"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 756668298158005,
							"parameters": {
								"object": "Enemy"
							}
						}
					],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "Rules",
							"sid": 690662732743411,
							"parameters": {
								"path": "KEY_Player & DOT & KEY_Health",
								"value": "max(0, Rules.Get(KEY_Player & DOT & KEY_Health) - Enemy.damage * dt)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 122113130659706,
							"parameters": {
								"instance-variable": "isHurt",
								"value": "YES"
							}
						}
					],
					"sid": 213451265694389
				},
				{
					"eventType": "comment",
					"text": "Dying"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-value",
							"objectClass": "Rules",
							"sid": 438692348991556,
							"parameters": {
								"path": "KEY_Player & DOT & KEY_Health",
								"cmp": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "todo feedback / game over screen, etc"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 242879650947707,
							"parameters": {
								"instance-variable": "isDead",
								"value": "YES"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Player",
							"sid": 574219236840102,
							"behaviorType": "8Direction",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Player",
							"sid": 269555740685749,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 960843257670359
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "levelUpUpgrade",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "option",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 797014957186007
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 899906407548923,
					"parameters": {
						"variable": "isLeveling",
						"comparison": 0,
						"value": "YES"
					}
				},
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 498497197667409,
					"parameters": {
						"variable": "isPaused",
						"comparison": 0,
						"value": "NO"
					}
				},
				{
					"id": "is-any-playing",
					"objectClass": "UI_Border_LevelUp",
					"sid": 183777275047325,
					"behaviorType": "Tween",
					"isInverted": true
				},
				{
					"id": "compare-instance-variable",
					"objectClass": "UI_Button9P_Upgrade",
					"sid": 464416607872974,
					"parameters": {
						"instance-variable": "option",
						"comparison": 0,
						"value": "option"
					}
				},
				{
					"id": "pick-children",
					"objectClass": "UI_Button9P_Upgrade",
					"sid": 123743708511942,
					"parameters": {
						"child": "UI_TextSF_Upgrade",
						"which": "own"
					}
				},
				{
					"id": "compare-text",
					"objectClass": "UI_TextSF_Upgrade",
					"sid": 111540531222433,
					"parameters": {
						"text-to-compare": "EMPTY",
						"case-sensitivity": "ignore-case"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Spend experience"
				},
				{
					"id": "subtract-from-instvar",
					"objectClass": "Player",
					"sid": 164427102917643,
					"parameters": {
						"instance-variable": "experience",
						"value": "Rules.Get(KEY_Player & DOT & KEY_Experience_Target)"
					}
				},
				{
					"type": "comment",
					"text": "Tween out level upUI"
				},
				{
					"id": "tween-one-property",
					"objectClass": "UI_Border_LevelUp",
					"sid": 411269398563607,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "TWEEN_LevelUp_FadeOut",
						"property": "offsetOpacity",
						"end-value": "0",
						"time": "1",
						"ease": "easeoutquint",
						"destroy-on-complete": "no",
						"loop": "no",
						"ping-pong": "no",
						"repeat-count": "1"
					}
				},
				{
					"id": "wait-for-previous-actions",
					"objectClass": "System",
					"sid": 777887322997353
				},
				{
					"id": "set-visible",
					"objectClass": "UI_Border_LevelUp",
					"sid": 787808226938946,
					"parameters": {
						"visibility": "invisible"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 426153536588302,
					"parameters": {
						"variable": "isLeveling",
						"value": "NO"
					}
				},
				{
					"type": "comment",
					"text": "Increase target experience"
				},
				{
					"id": "set-value",
					"objectClass": "Rules",
					"sid": 215433469077875,
					"parameters": {
						"path": "KEY_Player & DOT & KEY_Experience_Target",
						"value": "round(Rules.Get(KEY_Player & DOT & KEY_Experience_Target) * Rules.Get(KEY_Player & DOT & KEY_Experience_Target_Multiplier))"
					}
				},
				{
					"type": "comment",
					"text": "Apply selected upgrade"
				},
				{
					"customAction": "applyUpgrade",
					"objectClass": "Player",
					"sid": 450428395935593,
					"parameters": [
						"UI_Button9P_Upgrade.upgrade"
					]
				},
				{
					"type": "comment",
					"text": "Resume game"
				},
				{
					"id": "set-object-time-scale",
					"objectClass": "System",
					"sid": 163372637783556,
					"parameters": {
						"object": "Drop",
						"time-scale": "1"
					}
				},
				{
					"id": "set-object-time-scale",
					"objectClass": "System",
					"sid": 374930440088694,
					"parameters": {
						"object": "Enemy",
						"time-scale": "1"
					}
				},
				{
					"id": "set-object-time-scale",
					"objectClass": "System",
					"sid": 581517427302123,
					"parameters": {
						"object": "Player",
						"time-scale": "1"
					}
				},
				{
					"id": "set-object-time-scale",
					"objectClass": "System",
					"sid": 232002924512385,
					"parameters": {
						"object": "Weapon",
						"time-scale": "1"
					}
				},
				{
					"id": "set-object-time-scale",
					"objectClass": "System",
					"sid": 222741729041849,
					"parameters": {
						"object": "UI_TextSF_DamageNumber",
						"time-scale": "1"
					}
				}
			],
			"sid": 134088445000097
		},
		{
			"aceType": "action",
			"aceName": "applyUpgrade",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "upgrade",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 323013347631822
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Apply upgrade (multiply)"
				},
				{
					"id": "set-value",
					"objectClass": "Rules",
					"sid": 438822248656384,
					"parameters": {
						"path": "Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)",
						"value": "Rules.Get(Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)) * Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Multiply)"
					}
				},
				{
					"type": "comment",
					"text": "Apply upgrade (add)"
				},
				{
					"id": "add-to",
					"objectClass": "Rules",
					"sid": 781287846172329,
					"parameters": {
						"path": "Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)",
						"value": "Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Add)"
					}
				},
				{
					"type": "comment",
					"text": "Apply upgrade (max)"
				},
				{
					"id": "set-value",
					"objectClass": "Rules",
					"sid": 999042333458569,
					"parameters": {
						"path": "Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)",
						"value": "Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Max) = 0 ? Rules.Get(Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)) : min(Rules.Get(Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Value)), Rules.Get(Rules.Get(KEY_Upgrades & DOT & upgrade & DOT & KEY_Rule_Max)))"
					}
				},
				{
					"type": "comment",
					"text": "Update player properties"
				},
				{
					"id": "set-max-speed",
					"objectClass": "Player",
					"sid": 764744182789778,
					"behaviorType": "8Direction",
					"parameters": {
						"max-speed": "Rules.Get(KEY_Player & DOT & KEY_MovementSpeed)"
					}
				},
				{
					"id": "set-acceleration",
					"objectClass": "Player",
					"sid": 300033388980964,
					"behaviorType": "8Direction",
					"parameters": {
						"acceleration": "Rules.Get(KEY_Player & DOT & KEY_MovementAcceleration)"
					}
				},
				{
					"id": "set-deceleration",
					"objectClass": "Player",
					"sid": 414761694337799,
					"behaviorType": "8Direction",
					"parameters": {
						"deceleration": "Rules.Get(KEY_Player & DOT & KEY_MovementDeceleration)"
					}
				}
			],
			"sid": 266788838218702
		}
	],
	"sid": 562729237747902
}